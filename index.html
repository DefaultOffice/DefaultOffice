<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Grid</title>
    <style>
        @font-face {
            font-family: 'Suisse Intl';
            src: url('./SuisseIntl-Medium.otf') format('opentype');
            font-weight: 500;
            font-style: normal;
        }

        @font-face {
            font-family: 'Suisse Intl';
            src: url('./SuisseIntl-Light.otf') format('opentype');
            font-weight: 300;
            font-style: normal;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            overflow: hidden;
            background: white;
            cursor: none;
            font-family: 'Suisse Intl', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        /* Custom cursor */
        .custom-cursor {
            position: fixed;
            width: 8px;
            height: 8px;
            background: black;
            border-radius: 50%;
            pointer-events: none;
            z-index: 200;
            mix-blend-mode: difference;
            transition: transform 0.1s ease;
            opacity: 0;
        }

        #grid-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: white;
        }

        .grid-square {
            position: absolute;
            background: black;
            transition: none;
        }

        .grid-hover-indicator {
            position: absolute;
            border: 2px solid #ef4444;
            border-radius: 50%;
            pointer-events: none;
            opacity: 0;
        }

        /* Hide scrollbars */
        ::-webkit-scrollbar {
            display: none;
        }
        
        body {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* Loading indicator - REMOVED */

        /* Logo with invert blend mode - now handles both text fallback and SVG */
        .logo {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 48px;
            font-weight: 700;
            color: white;
            mix-blend-mode: difference;
            z-index: 100;
            pointer-events: none;
            user-select: none;
            letter-spacing: 2px;
        }

        .logo svg {
            width: auto;
            height: 225px;
            fill: white;
            mix-blend-mode: difference;
        }

        /* Background text - on top but black */
        .background-text {
            position: fixed;
            bottom: 20px;
            left: 20px;
            width: 450px;
            font-size: 14px;
            line-height: 1.6;
            color: black;
            z-index: 50;
            pointer-events: none;
            user-select: none;
            font-family: 'Suisse Intl', sans-serif;
            font-weight: 500;
        }

        .background-text .clients {
            font-weight: 300;
            margin-top: 1em;
        }

        /* Social links - bottom right */
        .social-links {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            z-index: 50;
            text-align: right;
        }

        .social-links .copyright {
            font-family: 'Suisse Intl', sans-serif;
            font-weight: 300;
            font-size: 14px;
            color: black;
            margin-bottom: 4px;
            pointer-events: none;
            user-select: none;
        }

        .social-links .links-row {
            display: flex;
            gap: 20px;
        }

        .social-links a {
            color: black;
            text-decoration: none;
            font-size: 14px;
            pointer-events: auto;
            transition: opacity 0.2s ease;
            font-family: 'Suisse Intl', sans-serif;
            font-weight: 300;
            cursor: pointer;
        }

        .social-links a:hover {
            opacity: 0.5;
        }

        /* Mobile styles */
        @media (max-width: 768px) {
            .background-text {
                width: calc(100vw - 40px);
                bottom: 80px;
                font-size: 13px;
            }

            .social-links {
                bottom: 20px;
                right: 20px;
                gap: 6px;
            }

            .social-links .copyright,
            .social-links a {
                font-size: 13px;
            }

            .social-links .links-row {
                gap: 15px;
            }

            .logo {
                font-size: 36px;
            }

            .logo svg {
                height: 170px;
            }
        }
    </style>
</head>
<body>
    <div class="loading" id="loading">Generating interactive grid...</div>
    <div class="custom-cursor" id="custom-cursor"></div>
    <div class="background-text">
        Default office is an industrial design studio based in West London. Directed by Alex D'Souza and Joe Ground, Default Office works across climate and consumer technology, homeware and furniture. Our design ideology and services are employed by hardware start-ups and international organisations in the US, Europe and Asia.<br><br><span class="clients">Selected Clients: Lunar Energy, Daylight Computer, JosephJoseph, Unilever, Air-Up, Wild Energy, Opal Camera, Tom Dixon.</span>
    </div>
    <div class="social-links">
        <div class="copyright">Default Office Â© 2025</div>
        <div class="links-row">
            <a href="#" id="email-link">Email</a>
            <a href="https://www.instagram.com/defaultoffice_/" target="_blank">Instagram</a>
            <a href="https://www.linkedin.com/in/alexjosephdsouza/" target="_blank">LinkedIn</a>
        </div>
    </div>
    <div id="grid-canvas"></div>
    <div class="logo" id="logo">Default Office</div>

    <script>
        // Logo loader - checks for logo.svg and loads it if available
        function loadLogo() {
            const logoElement = document.getElementById('logo');
            
            // Try to load logo.svg
            fetch('./logo.svg')
                .then(response => {
                    if (response.ok) {
                        return response.text();
                    }
                    throw new Error('Logo not found');
                })
                .then(svgContent => {
                    // Replace text with SVG
                    logoElement.innerHTML = svgContent;
                })
                .catch(() => {
                    // Keep the default text if SVG fails to load
                    console.log('No logo.svg found, using default text');
                });
        }

        // Load logo on page load
        loadLogo();

        // Email clipboard functionality
        document.getElementById('email-link').addEventListener('click', function(e) {
            e.preventDefault();
            navigator.clipboard.writeText('studio@defaultoffice.com').then(function() {
                console.log('Email copied to clipboard');
                // Optional: Show brief feedback
                const link = e.target;
                const originalText = link.textContent;
                link.textContent = 'Copied';
                setTimeout(() => {
                    link.textContent = originalText;
                }, 2000);
            }).catch(function(err) {
                console.error('Failed to copy email: ', err);
                // Fallback: create temporary input and select
                const tempInput = document.createElement('input');
                tempInput.value = 'studio@defaultoffice.com';
                document.body.appendChild(tempInput);
                tempInput.select();
                document.execCommand('copy');
                document.body.removeChild(tempInput);
            });
        });
        class InteractiveGrid {
            constructor() {
                this.canvasWidth = window.innerWidth;
                this.canvasHeight = window.innerHeight;
                this.isMobile = window.innerWidth <= 768;
                
                // Mobile adjustments
                const baseSquares = this.isMobile ? 26 : 32; // 20% larger grid (fewer squares)
                this.baseSize = (this.canvasWidth / baseSquares) * 4;
                
                // Mobile touch radius is 50% bigger
                const radiusMultiplier = this.isMobile ? 1.125 : 0.75; // 1.125 = 0.75 * 1.5
                this.hoverRadius = this.baseSize * radiusMultiplier;
                
                this.mousePos = { x: -1000, y: -1000 };
                this.squares = [];
                this.flickeringSquares = new Set();
                this.timers = [];
                this.hoverIndicator = null;
                this.customCursor = null;
                
                this.canvas = document.getElementById('grid-canvas');
                this.customCursor = document.getElementById('custom-cursor');
                
                this.initializeGrid();
                this.setupEventListeners();
                this.startFlickering();
                this.handleResize();
            }

            initializeGrid() {
                let y = 0;
                let squareIndex = 0;
                
                while (y < this.canvasHeight) {
                    let x = 0;
                    
                    while (x < this.canvasWidth) {
                        const rand = Math.random();
                        let sizeMultiplier;
                        if (rand < 0.33) sizeMultiplier = 1;        // Large
                        else if (rand < 0.66) sizeMultiplier = 0.5; // Medium
                        else sizeMultiplier = 0.25;                // Small
                        
                        const squareSize = sizeMultiplier * this.baseSize;
                        const width = Math.min(squareSize, this.canvasWidth - x);
                        const height = Math.min(squareSize, this.canvasHeight - y);
                        
                        const squareData = {
                            x, y, width, height,
                            originalSize: squareSize,
                            sizeMultiplier,
                            index: squareIndex,
                            element: null
                        };
                        
                        // Create DOM element
                        const squareElement = document.createElement('div');
                        squareElement.className = 'grid-square';
                        squareElement.style.width = width + 'px';
                        squareElement.style.height = height + 'px';
                        squareElement.style.left = x + 'px';
                        squareElement.style.top = y + 'px';
                        squareElement.style.backgroundColor = 'black';
                        
                        this.canvas.appendChild(squareElement);
                        squareData.element = squareElement;
                        this.squares.push(squareData);
                        
                        x += width;
                        squareIndex++;
                    }
                    y += this.baseSize * 0.25; // Use smallest square size for row increment
                }
                
                // Create hover indicator (hidden)
                this.hoverIndicator = document.createElement('div');
                this.hoverIndicator.className = 'grid-hover-indicator';
                this.hoverIndicator.style.width = (this.hoverRadius * 2) + 'px';
                this.hoverIndicator.style.height = (this.hoverRadius * 2) + 'px';
                this.hoverIndicator.style.display = 'none';
                this.canvas.appendChild(this.hoverIndicator);
            }

            setupEventListeners() {
                // Global mouse move for both cursor and hover effect
                document.addEventListener('mousemove', (e) => {
                    this.mousePos.x = e.clientX;
                    this.mousePos.y = e.clientY;
                    this.updateCursor();
                    this.updateHoverEffect();
                });

                document.addEventListener('mouseenter', () => {
                    this.customCursor.style.opacity = '1';
                });

                document.addEventListener('mouseleave', () => {
                    this.mousePos.x = -1000;
                    this.mousePos.y = -1000;
                    this.customCursor.style.opacity = '0';
                    this.updateHoverEffect();
                });

                // Touch events for mobile
                this.canvas.addEventListener('touchmove', (e) => {
                    e.preventDefault();
                    if (e.touches.length > 0) {
                        this.mousePos.x = e.touches[0].clientX;
                        this.mousePos.y = e.touches[0].clientY;
                        this.updateHoverEffect();
                    }
                });

                this.canvas.addEventListener('touchend', () => {
                    this.mousePos.x = -1000;
                    this.mousePos.y = -1000;
                    this.updateHoverEffect();
                });

                this.canvas.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    if (e.touches.length > 0) {
                        this.mousePos.x = e.touches[0].clientX;
                        this.mousePos.y = e.touches[0].clientY;
                        this.updateHoverEffect();
                    }
                });
            }

            handleResize() {
                window.addEventListener('resize', () => {
                    // Clear existing grid
                    this.canvas.innerHTML = '';
                    this.squares = [];
                    this.flickeringSquares.clear();
                    this.timers.forEach(timer => clearTimeout(timer));
                    this.timers = [];
                    
                    // Recalculate dimensions
                    this.canvasWidth = window.innerWidth;
                    this.canvasHeight = window.innerHeight;
                    this.isMobile = window.innerWidth <= 768;
                    
                    // Mobile adjustments
                    const baseSquares = this.isMobile ? 26 : 32; // 20% larger grid (fewer squares)
                    this.baseSize = (this.canvasWidth / baseSquares) * 4;
                    
                    // Mobile touch radius is 50% bigger
                    const radiusMultiplier = this.isMobile ? 1.125 : 0.75; // 1.125 = 0.75 * 1.5
                    this.hoverRadius = this.baseSize * radiusMultiplier;
                    
                    // Reinitialize
                    this.initializeGrid();
                    this.startFlickering();
                });
            }

            updateCursor() {
                if (this.customCursor && this.mousePos.x > -500) {
                    this.customCursor.style.left = (this.mousePos.x - 4) + 'px';
                    this.customCursor.style.top = (this.mousePos.y - 4) + 'px';
                }
            }

            updateHoverEffect() {
                // Update hover indicator position (hidden)
                if (this.mousePos.x > 0) {
                    this.hoverIndicator.style.display = 'block';
                    this.hoverIndicator.style.left = (this.mousePos.x - this.hoverRadius) + 'px';
                    this.hoverIndicator.style.top = (this.mousePos.y - this.hoverRadius) + 'px';
                } else {
                    this.hoverIndicator.style.display = 'none';
                }
                
                // Update square colors
                this.squares.forEach(square => {
                    const isInRadius = this.isSquareInRadius(square);
                    const isFlickering = this.flickeringSquares.has(square.index);
                    
                    if (isInRadius || isFlickering) {
                        square.element.style.backgroundColor = 'transparent';
                    } else {
                        square.element.style.backgroundColor = 'black';
                    }
                });
            }

            isSquareInRadius(square) {
                const squareCenterX = square.x + square.width / 2;
                const squareCenterY = square.y + square.height / 2;
                
                const distance = Math.sqrt(
                    Math.pow(this.mousePos.x - squareCenterX, 2) + 
                    Math.pow(this.mousePos.y - squareCenterY, 2)
                );
                
                return distance <= this.hoverRadius;
            }

            startFlickering() {
                this.squares.forEach((square, index) => {
                    const randomDelay = Math.random() * 5000 + 1000; // 1-6 second initial delay
                    
                    const flicker = () => {
                        if (Math.random() < 0.15) { // 15% chance to toggle
                            if (this.flickeringSquares.has(index)) {
                                this.flickeringSquares.delete(index);
                            } else {
                                this.flickeringSquares.add(index);
                            }
                            this.updateHoverEffect();
                        }
                        
                        // Set next random flicker time
                        const nextDelay = Math.random() * 4000 + 500; // 0.5-4.5 second intervals
                        this.timers[index] = setTimeout(flicker, nextDelay);
                    };
                    
                    this.timers[index] = setTimeout(flicker, randomDelay);
                });
            }
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', () => {
            new InteractiveGrid();
        });

        // Prevent context menu on right click
        document.addEventListener('contextmenu', e => e.preventDefault());
        
        // Prevent scrolling on mobile
        document.addEventListener('touchmove', e => e.preventDefault(), { passive: false });

        // Prevent zoom on double tap (iOS Safari)
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function (event) {
            const now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) {
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, false);
    </script>
</body>
</html>
